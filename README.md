# generator-glip-bot [![NPM version][npm-image]][npm-url]

> Generate a Glip chatbot

## Installation

First, install [Yeoman](http://yeoman.io) and generator-glip-bot using [npm](https://www.npmjs.com/) (we assume you have pre-installed [node.js](https://nodejs.org/)).

```bash
npm install -g yo
npm install -g generator-glip-bot
```

Then generate your new project:

```bash
yo glip-bot
```

## Starting bot

###

### Create bot and get credentials

[Create bot](https://developer.ringcentral.com/new-app?name=Sample+Bot+App&desc=A+sample+app+created+for+the+javascript+chatbot+framework&public=true&type=ServerBot&permissions=ReadAccounts,EditExtensions,SubscriptionWebhook,Glip&redirectUri=https://%3Cchatbot-server%3E/bot/oauth)

### Start ngrok to get a public address

This step is optional if you have other ways to get your bot a public address. For example, you might have an VPS with public IP address. But ngrok is pretty handy during development phase:

```
yarn ngrok
```

Please take a note of the public address with scheme "https", it should be in the form of `https://xxxxx.ngrok.io`. We will need it soon.

Port 3000 is where we run our bot's Express.js process.

In content below, we call this public address `https://<chatbot-server>`.

### Specify environment variables:

Create `.env` files:

```
cp sample.env .env
```

- `RINGCENTRAL_SERVER`, use https://platform.dev.ringcentral.com for sandbox and https://platform.ringcentral.com for production
- `RINGCENTRAL_CHATBOT_DATABASE_CONNECTION_URI`, please sepcify connection URI to a relational database.
  - It is recommended to use SQLite for development: `sqlite://./db.sqlite`
- `RINGCENTRAL_CHATBOT_CLIENT_ID` & `RINGCENTRAL_CHATBOT_CLIENT_SECRET` could be found in the newly created RingCentral app.
- `RINGCENTRAL_CHATBOT_SERVER` is the public address generated by ngrok
  - For example, https://xxxxx.ngrok.io
  - For produciton, you might put your app behind nginx/apache and use the public address of those HTTP servers.
- `RINGCENTRAL_CHATBOT_EXPRESS_PORT` is the port we used for Express.js. It should match the ngrok command above.
- `RINGCENTRAL_CHATBOT_ADMIN_USERNAME` & `RINGCENTRAL_CHATBOT_ADMIN_PASSWORD` are the admin username and password.
  - Admin is the bot admin. It's normally the bot creator or maintainer.

### Create database tables

```
curl -X PUT -u admin:password https://<chatbot-server>/admin/setup-database
```

`admin` & `password` are defined in `.env` file we created above.

For more information, please read [setup database](https://github.com/tylerlong/ringcentral-chatbot-js#setup-database).

### Add the bot to Glip

Follow these steps to [add](https://github.com/tylerlong/glip-ping-chatbot/tree/master#add-the-bot-to-glip) the bot to Glip.

### Start Developing

```
yarn start:dev
```

## Getting To Know Yeoman

- Yeoman has a heart of gold.
- Yeoman is a person with feelings and opinions, but is very easy to work with.
- Yeoman can be too opinionated at times but is easily convinced not to be.
- Feel free to [learn more about Yeoman](http://yeoman.io/).

## License

MIT Â© [Jackson Melcher](https://github.com/jacksonmelcher)

[npm-image]: https://badge.fury.io/js/generator-glip-bot.svg
[npm-url]: https://npmjs.org/package/generator-glip-bot
[travis-image]: https://travis-ci.com/jacksonmelcher/generator-glip-bot.svg?branch=master
[travis-url]: https://travis-ci.com/jacksonmelcher/generator-glip-bot
[daviddm-image]: https://david-dm.org/jacksonmelcher/generator-glip-bot.svg?theme=shields.io
[daviddm-url]: https://david-dm.org/jacksonmelcher/generator-glip-bot
[coveralls-image]: https://coveralls.io/repos/jacksonmelcher/generator-glip-bot/badge.svg
[coveralls-url]: https://coveralls.io/r/jacksonmelcher/generator-glip-bot
